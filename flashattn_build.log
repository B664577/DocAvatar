Building flash-attn from source...
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Collecting flash-attn==2.6.3
  Downloading https://pypi.tuna.tsinghua.edu.cn/packages/cd/1e/21321670cd3c2f225026d9fd89272cae661529238850e79f48ccf2f9e4e3/flash_attn-2.6.3.tar.gz (2.6 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.6/2.6 MB 2.6 MB/s  0:00:01
  Preparing metadata (setup.py): started
  Preparing metadata (setup.py): finished with status 'done'
Requirement already satisfied: torch in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from flash-attn==2.6.3) (2.7.0+cu128)
Requirement already satisfied: einops in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from flash-attn==2.6.3) (0.8.1)
Requirement already satisfied: filelock in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (3.19.1)
Requirement already satisfied: typing-extensions>=4.10.0 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (4.14.1)
Requirement already satisfied: setuptools in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (78.1.1)
Requirement already satisfied: sympy>=1.13.3 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (1.13.3)
Requirement already satisfied: networkx in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (3.3)
Requirement already satisfied: jinja2 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (3.1.6)
Requirement already satisfied: fsspec in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (2025.7.0)
Requirement already satisfied: nvidia-cuda-nvrtc-cu12==12.8.61 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.61)
Requirement already satisfied: nvidia-cuda-runtime-cu12==12.8.57 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.57)
Requirement already satisfied: nvidia-cuda-cupti-cu12==12.8.57 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.57)
Requirement already satisfied: nvidia-cudnn-cu12==9.7.1.26 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (9.7.1.26)
Requirement already satisfied: nvidia-cublas-cu12==12.8.3.14 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.3.14)
Requirement already satisfied: nvidia-cufft-cu12==11.3.3.41 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (11.3.3.41)
Requirement already satisfied: nvidia-curand-cu12==10.3.9.55 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (10.3.9.55)
Requirement already satisfied: nvidia-cusolver-cu12==11.7.2.55 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (11.7.2.55)
Requirement already satisfied: nvidia-cusparse-cu12==12.5.7.53 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.5.7.53)
Requirement already satisfied: nvidia-cusparselt-cu12==0.6.3 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (0.6.3)
Requirement already satisfied: nvidia-nccl-cu12==2.26.2 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (2.26.2)
Requirement already satisfied: nvidia-nvtx-cu12==12.8.55 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.55)
Requirement already satisfied: nvidia-nvjitlink-cu12==12.8.61 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (12.8.61)
Requirement already satisfied: nvidia-cufile-cu12==1.13.0.11 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (1.13.0.11)
Requirement already satisfied: triton==3.3.0 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from torch->flash-attn==2.6.3) (3.3.0)
Requirement already satisfied: mpmath<1.4,>=1.1.0 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from sympy>=1.13.3->torch->flash-attn==2.6.3) (1.3.0)
Requirement already satisfied: MarkupSafe>=2.0 in /home/long/miniconda3/envs/docavatar/lib/python3.12/site-packages (from jinja2->torch->flash-attn==2.6.3) (3.0.2)
Building wheels for collected packages: flash-attn
  DEPRECATION: Building 'flash-attn' using the legacy setup.py bdist_wheel mechanism, which will be removed in a future version. pip 25.3 will enforce this behaviour change. A possible replacement is to use the standardized build interface by setting the `--use-pep517` option, (possibly combined with `--no-build-isolation`), or adding a `pyproject.toml` file to the source tree of 'flash-attn'. Discussion can be found at https://github.com/pypa/pip/issues/6334
  Building wheel for flash-attn (setup.py): started
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): still running...
  Building wheel for flash-attn (setup.py): finished with status 'done'
  Created wheel for flash-attn: filename=flash_attn-2.6.3-cp312-cp312-linux_x86_64.whl size=183790975 sha256=3c36e5e498d1ef3f79e4655da25397fc13fb44405d0d77abae754c7be6c0f3e3
  Stored in directory: /tmp/pip-ephem-wheel-cache-rx4f25ey/wheels/53/2e/03/b080c676ec4a8ebd32eb170cd58737aa136a86063841e6814f
Successfully built flash-attn
Installing collected packages: flash-attn
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
dots-ocr 1.0 requires flash-attn==2.8.0.post2, but you have flash-attn 2.6.3 which is incompatible.
Successfully installed flash-attn-2.6.3
