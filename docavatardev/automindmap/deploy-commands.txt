# AIæ€ç»´å¯¼å›¾æœåŠ¡å™¨éƒ¨ç½²å‘½ä»¤æ¸…å•
# å¤åˆ¶ä»¥ä¸‹å‘½ä»¤åˆ°æœåŠ¡å™¨æ‰§è¡Œ

## ğŸ“‹ å®Œæ•´éƒ¨ç½²å‘½ä»¤ï¼ˆä¸€æ¬¡æ€§å¤åˆ¶æ‰§è¡Œï¼‰

```bash
# 1. å®‰è£…Dockerç¯å¢ƒï¼ˆUbuntu/Debianï¼‰
sudo apt update && sudo apt install -y docker.io docker-compose

# 2. å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker $USER

# 3. åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /opt/ai-mindmap
cd /opt/ai-mindmap

# 4. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åï¼Œè®¾ç½®æƒé™
sudo chown -R $USER:$USER /opt/ai-mindmap

# 5. æ„å»ºå¹¶å¯åŠ¨ï¼ˆDocker Composeæ–¹å¼ï¼‰
sudo docker-compose up -d --build

# 6. éªŒè¯éƒ¨ç½²
sudo docker ps
sudo docker logs ai-mindmap-container
```

## ğŸ¯ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
sudo ufw allow 9301

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:9301

# æŸ¥çœ‹å®¹å™¨IP
sudo docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' ai-mindmap-container
```

## ğŸ”§ æ•…éšœæ’é™¤å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
sudo docker ps -a

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo docker logs -f ai-mindmap-container

# è¿›å…¥å®¹å™¨è°ƒè¯•
sudo docker exec -it ai-mindmap-container /bin/sh

# é‡å¯å®¹å™¨
sudo docker restart ai-mindmap-container

# æ¸…ç†å¹¶é‡æ–°éƒ¨ç½²
sudo docker-compose down
sudo docker system prune -f
sudo docker-compose up -d --build
```

## ğŸ“Š å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# åœæ­¢æœåŠ¡
sudo docker-compose down

# é‡å¯æœåŠ¡
sudo docker-compose restart

# æ›´æ–°é•œåƒ
sudo docker-compose pull
sudo docker-compose up -d

# æŸ¥çœ‹èµ„æºä½¿ç”¨
sudo docker stats ai-mindmap-container
```

## ğŸŒ é˜²ç«å¢™é…ç½®

```bash
# Ubuntu/Debian
sudo ufw allow 9301
sudo ufw status

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=9301/tcp
sudo firewall-cmd --reload
```

## ğŸ“‚ æ–‡ä»¶æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- [ ] Dockerfile
- [ ] docker-compose.yml
- [ ] server.js
- [ ] package.json
- [ ] package-lock.json
- [ ] æ‰€æœ‰å‰ç«¯æ–‡ä»¶
- [ ] uploads/ ç›®å½•

## âœ… éƒ¨ç½²éªŒè¯

```bash
# 1. å®¹å™¨è¿è¡Œæ£€æŸ¥
sudo docker ps | grep ai-mindmap

# 2. ç«¯å£ç›‘å¬æ£€æŸ¥
sudo netstat -tulpn | grep 9301

# 3. å¤–éƒ¨è®¿é—®æµ‹è¯•
curl -I http://$(hostname -I | awk '{print $1}'):9301
```

## ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬

ä¿å­˜ä»¥ä¸‹å†…å®¹ä¸º `deploy.sh` å¹¶æ‰§è¡Œï¼š
```bash
#!/bin/bash
sudo apt update && sudo apt install -y docker.io docker-compose
sudo systemctl start docker && sudo systemctl enable docker
sudo mkdir -p /opt/ai-mindmap && cd /opt/ai-mindmap
# ä¸Šä¼ æ–‡ä»¶åæ‰§è¡Œï¼š
sudo docker-compose up -d --build
```