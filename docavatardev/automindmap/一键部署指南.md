# AI思维导图工具 - 一键部署指南

## 🚀 一键部署方案

本项目提供多种一键部署方式，适用于不同操作系统和环境需求。

## 📋 系统要求

### Windows
- Windows 10 或更高版本
- 管理员权限（首次运行需要）
- 网络连接（用于下载依赖）

### Linux/macOS
- Ubuntu 18.04+ / CentOS 7+ / macOS 10.14+
- 网络连接
- 非root用户（推荐）

## 🔧 一键部署脚本

### 1. Windows 一键部署

#### 方案A：完整自动部署（推荐）
```
双击运行：一键启动-完整版.bat
```
- ✅ 自动检测并安装Docker Desktop
- ✅ 自动检测并安装Git
- ✅ 自动构建和启动服务
- ✅ 无需手动操作

#### 方案B：PowerShell高级部署
```
右键管理员运行：一键部署.ps1
```
- 支持参数化配置
- 详细的错误处理和日志
- 可跳过特定检查

#### 方案C：传统批处理
```
双击运行：一键完整部署.bat
```
- 兼容性好
- 分步骤确认安装

### 2. Linux/macOS 一键部署

#### 方案A：完整自动部署
```bash
chmod +x 一键完整部署.sh
./一键完整部署.sh
```
- ✅ 自动检测并安装Docker
- ✅ 自动检测并安装Git
- ✅ 自动克隆或更新项目
- ✅ 自动构建和启动

#### 方案B：简化部署
```bash
chmod +x docker-start.sh
./docker-start.sh
```
- 假设Docker和Git已安装
- 快速启动现有项目

## 🎯 使用步骤

### Windows用户
1. **下载项目**或**克隆仓库**
2. **选择部署方式**：
   - 完全自动化：双击`一键启动-完整版.bat`
   - 高级控制：管理员运行`一键部署.ps1`
3. **等待完成**：脚本会自动完成所有安装
4. **访问服务**：浏览器打开 http://localhost:3000

### Linux/macOS用户
1. **下载项目**：
   ```bash
   git clone https://github.com/your-repo/ai-mindmap.git
   cd ai-mindmap
   ```
2. **运行部署脚本**：
   ```bash
   chmod +x 一键完整部署.sh
   ./一键完整部署.sh
   ```
3. **访问服务**：浏览器打开 http://localhost:3000

## 🛠️ 手动部署（备用方案）

如果一键部署遇到问题，可以手动操作：

### 1. 安装依赖

#### Windows
1. 安装 [Docker Desktop](https://www.docker.com/products/docker-desktop/)
2. 安装 [Git](https://git-scm.com/download/win)
3. 重启电脑

#### Ubuntu/Debian
```bash
# 安装Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER

# 安装Docker Compose
sudo apt-get install docker-compose-plugin

# 安装Git
sudo apt-get install git
```

#### CentOS/RHEL
```bash
# 安装Docker
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
sudo systemctl start docker
sudo usermod -aG docker $USER

# 安装Git
sudo yum install -y git
```

#### macOS
```bash
# 安装Docker Desktop（推荐）
# 下载地址：https://www.docker.com/products/docker-desktop/

# 安装Git（通过Homebrew）
brew install git
```

### 2. 手动启动
```bash
# 克隆项目
git clone https://github.com/your-repo/ai-mindmap.git
cd ai-mindmap

# 构建和启动
docker-compose build --no-cache
docker-compose up -d

# 查看日志
docker-compose logs -f
```

## 🔍 故障排除

### 常见问题

#### 1. Docker未运行
```bash
# Windows
net start com.docker.service

# Linux
sudo systemctl start docker

# macOS
# 启动Docker Desktop应用
```

#### 2. 端口被占用
```bash
# 查看端口占用
netstat -ano | findstr :3000  # Windows
lsof -i :3000                 # Linux/macOS

# 修改端口：编辑docker-compose.yml，修改ports部分
```

#### 3. 构建失败
```bash
# 清理缓存
docker system prune -a

# 重新构建
docker-compose build --no-cache
docker-compose up -d
```

#### 4. 权限问题（Linux）
```bash
# 添加用户到docker组
sudo usermod -aG docker $USER
# 重新登录或运行：newgrp docker
```

### 日志查看
```bash
# 查看所有日志
docker-compose logs

# 实时查看日志
docker-compose logs -f

# 查看特定服务日志
docker-compose logs ai-mindmap
```

## 🔄 管理命令

### 服务管理
```bash
# 启动服务
docker-compose up -d

# 停止服务
docker-compose down

# 重启服务
docker-compose restart

# 查看状态
docker-compose ps
```

### 更新服务
```bash
# 拉取最新代码
git pull

# 重新构建
docker-compose build --no-cache

# 重启服务
docker-compose up -d
```

## 📁 目录结构

```
ai-mindmap/
├── 一键启动-完整版.bat     # Windows完整自动部署
├── 一键完整部署.bat        # Windows分步部署
├── 一键部署.ps1           # PowerShell高级部署
├── 一键完整部署.sh         # Linux/macOS完整部署
├── docker-start.sh        # Linux/macOS简化部署
├── docker-compose.yml     # Docker配置
├── Dockerfile            # Docker镜像配置
└── ...
```

## 🆘 技术支持

如果部署过程中遇到问题：

1. **查看日志**：`docker-compose logs`
2. **检查服务状态**：`docker-compose ps`
3. **重启服务**：`docker-compose restart`
4. **清理缓存**：`docker system prune -a`

## 📞 联系支持

- 提交Issue：GitHub Issues
- 查看文档：项目README.md
- 社区支持：项目讨论区

---

**💡 提示**：首次部署建议使用完整自动部署脚本，后续更新只需运行`git pull`和`docker-compose up -d`即可。